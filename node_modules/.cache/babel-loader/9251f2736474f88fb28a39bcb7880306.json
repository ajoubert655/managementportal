{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\aljou\\\\Documents\\\\Bitbucket\\\\management-portal\\\\src\\\\containers\\\\ChangePassword\\\\ChangePassword.js\";\nimport React, { Component } from 'react';\nimport { Auth } from 'aws-amplify';\nimport { withRouter } from 'react-router-dom';\nimport classes from './ChangePassword.module.css';\n\nclass ChangePassword extends Component {\n  constructor() {\n    super();\n\n    this.handleSubmit = async event => {\n      event.preventDefault();\n      let oldPasswordField = document.getElementById('oldPassword');\n      let newPasswordField = document.getElementById('newPassword');\n      let confirmNewPasswordField = document.getElementById('confirmNewPassword');\n\n      if (oldPasswordField.value === '' || newPasswordField.value === '' || confirmNewPasswordField.value === '') {\n        document.getElementById('errorMessage').innerHTML = 'All fields are required';\n      } else if (oldPasswordField.value === newPasswordField.value) {\n        document.getElementById('errorMessage').innerHTML = 'Your new password cannot be the same as your old password';\n      } else if (newPasswordField.value !== confirmNewPasswordField.value) {\n        document.getElementById('errorMessage').innerHTML = 'Password fields do not match';\n      } else {\n        document.getElementById('errorMessage').innerHTML = ''; // cognito integration\n\n        try {\n          const user = await Auth.currentAuthenticatedUser();\n          console.log(user);\n          await Auth.changePassword(user, this.state.oldPassword, this.state.newPassword);\n          this.props.history.push('/change-password-confirmation');\n        } catch (error) {\n          alert(error);\n        }\n      }\n    };\n\n    this.state = {\n      oldPassword: '',\n      newPassword: '',\n      confirmNewPassword: ''\n    };\n    this.handleOldPasswordChange = this.handleOldPasswordChange.bind(this);\n    this.handleNewPasswordChange = this.handleNewPasswordChange.bind(this);\n    this.handleConfirmNewPasswordChange = this.handleConfirmNewPasswordChange.bind(this);\n  }\n\n  handleOldPasswordChange(event) {\n    this.setState({\n      oldPassword: event.target.value\n    });\n  }\n\n  handleNewPasswordChange(event) {\n    this.setState({\n      newPassword: event.target.value\n    });\n  }\n\n  handleConfirmNewPasswordChange(event) {\n    this.setState({\n      confirmNewPassword: event.target.value\n    });\n  } // perform validation and submit request\n\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: classes.main,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.wrapper,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: classes.header,\n          children: \"Change password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please enter your old password, and a new password of your choosing.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: this.handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            id: \"oldPassword\",\n            className: classes.inputField,\n            name: \"oldPassword\",\n            placeholder: \"Enter old password\",\n            onChange: this.handleOldPasswordChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            id: \"newPassword\",\n            className: classes.inputField,\n            name: \"newPassword\",\n            placeholder: \"Enter new password\",\n            onChange: this.handleNewPasswordChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            id: \"confirmNewPassword\",\n            className: classes.inputField,\n            name: \"confirmNewPassword\",\n            placeholder: \"Confirm new password\",\n            onChange: this.handleConfirmNewPasswordChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            id: \"errorMessage\",\n            className: classes.errorMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Submit\",\n            className: classes.button\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(ChangePassword);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["C:/Users/aljou/Documents/Bitbucket/management-portal/src/containers/ChangePassword/ChangePassword.js"],"names":["React","Component","Auth","withRouter","classes","ChangePassword","constructor","handleSubmit","event","preventDefault","oldPasswordField","document","getElementById","newPasswordField","confirmNewPasswordField","value","innerHTML","user","currentAuthenticatedUser","console","log","changePassword","state","oldPassword","newPassword","props","history","push","error","alert","confirmNewPassword","handleOldPasswordChange","bind","handleNewPasswordChange","handleConfirmNewPasswordChange","setState","target","render","main","wrapper","header","inputField","errorMessage","button"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {Auth} from 'aws-amplify';\r\nimport {withRouter} from 'react-router-dom';\r\n\r\nimport classes from './ChangePassword.module.css';\r\n\r\nclass ChangePassword extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      oldPassword: '',\r\n      newPassword: '',\r\n      confirmNewPassword: '',\r\n    }\r\n\r\n    this.handleOldPasswordChange = this.handleOldPasswordChange.bind(this);\r\n    this.handleNewPasswordChange = this.handleNewPasswordChange.bind(this);\r\n    this.handleConfirmNewPasswordChange = this.handleConfirmNewPasswordChange.bind(this);\r\n  }\r\n\r\n  handleOldPasswordChange(event) {\r\n    this.setState({oldPassword: event.target.value});\r\n  }\r\n\r\n  handleNewPasswordChange(event) {\r\n    this.setState({newPassword: event.target.value})\r\n  }\r\n\r\n  handleConfirmNewPasswordChange(event) {\r\n    this.setState({confirmNewPassword: event.target.value});\r\n  }\r\n\r\n    // perform validation and submit request\r\n    handleSubmit = async (event) => {\r\n      event.preventDefault();\r\n      let oldPasswordField = document.getElementById('oldPassword');\r\n      let newPasswordField = document.getElementById('newPassword');\r\n      let confirmNewPasswordField = document.getElementById('confirmNewPassword');\r\n      \r\n      if (oldPasswordField.value === '' || newPasswordField.value === '' || confirmNewPasswordField.value === ''){\r\n        document.getElementById('errorMessage').innerHTML='All fields are required'\r\n      } else if (oldPasswordField.value === newPasswordField.value) {\r\n        document.getElementById('errorMessage').innerHTML='Your new password cannot be the same as your old password'\r\n      } else if (newPasswordField.value !== confirmNewPasswordField.value) {\r\n        document.getElementById('errorMessage').innerHTML='Password fields do not match'\r\n      } else {\r\n        document.getElementById('errorMessage').innerHTML=''\r\n        \r\n        // cognito integration\r\n        try {\r\n          const user = await Auth.currentAuthenticatedUser()\r\n          console.log(user);\r\n          await Auth.changePassword(\r\n            user,\r\n            this.state.oldPassword,\r\n            this.state.newPassword\r\n          );\r\n          this.props.history.push('/change-password-confirmation');\r\n        } catch(error) {\r\n          alert(error)\r\n        }\r\n      }\r\n    }\r\n\r\n  render() {\r\n    return (\r\n      <main className={classes.main}>\r\n      <div className={classes.wrapper}>\r\n        <h3 className={classes.header}>Change password</h3>\r\n        <p>Please enter your old password, and a new password of your choosing.</p>\r\n\r\n        <form onSubmit={this.handleSubmit}>\r\n          <input\r\n            type='password'\r\n            id='oldPassword'\r\n            className={classes.inputField}\r\n            name='oldPassword'\r\n            placeholder='Enter old password'\r\n            onChange={this.handleOldPasswordChange}\r\n          />\r\n          <br />\r\n\r\n          <input\r\n            type='password'\r\n            id='newPassword'\r\n            className={classes.inputField}\r\n            name='newPassword'\r\n            placeholder='Enter new password'\r\n            onChange={this.handleNewPasswordChange}\r\n          />\r\n          <br />\r\n\r\n          <input\r\n            type='password'\r\n            id='confirmNewPassword'\r\n            className={classes.inputField}\r\n            name='confirmNewPassword'\r\n            placeholder='Confirm new password'\r\n            onChange={this.handleConfirmNewPasswordChange}\r\n          />\r\n          <br />\r\n\r\n          <span\r\n            id='errorMessage'\r\n            className={classes.errorMessage}\r\n          />\r\n          <br />\r\n\r\n          <input\r\n            type='submit'\r\n            value='Submit'\r\n            className={classes.button}\r\n          >\r\n          </input>\r\n        </form>\r\n      </div>\r\n    </main>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default withRouter(ChangePassword);"]},"metadata":{},"sourceType":"module"}